{% extends "chat_base.html" %}

{% load static %}

{% block main %}
  <article>
    {% for c in object_list %}
    <div>
      <span style="padding-right: 15px;">{{c.posted|date:'G:i:s'}}</span>
      <strong>{{c.author}}:</strong>
      {{c.content}}
    </div>
    {% endfor %}
  </article>
  <p>You're chatting as <strong id="username"></strong></p>
  <form>
    <p>Type your message:</p>
    <input name="message" hx-post="{#{% url 'file_archive_update' author.uid %}#}" hx-on:keydown="(event.keyCode===13&&!event.shiftKey)?event.preventDefault():null">
    <input type="hidden" id="username_submit" name="username_submit">
  </form>

  <script>
    const username_set = localStorage.getItem("username")
    username_field = document.getElementById("username")
    username_field.textContent=username_set
    username_submit = document.getElementById("username_submit")
    username_submit.value=username_set
  </script>
{% endblock %}
